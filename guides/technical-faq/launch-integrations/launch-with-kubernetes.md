# Launch with Kubernetes

[Kubernetes](https://kubernetes.io) is an open-source containerization and deployment system. With Launch, you can build and run jobs on any Kubernetes cluster, including self-managed clusters as well as clusters managed through cloud services like [Google Kubernetes Engine (GKE)](https://cloud.google.com/kubernetes-engine) or [Amazon Elastic Kubernetes Service (EKS)](https://aws.amazon.com/eks/).&#x20;

## Kubernetes quickstart

### Requirements

* Download and install the [`kubectl` command-line tool](https://kubernetes.io/releases/download/), set up a cluster on your chosen infrastructure, and configure your cluster.
* Install the [Kubernetes Python client library](https://github.com/kubernetes-client/python).
* Make sure you have the latest version of wandb and you have Launch enabled by adding `instant replay` to your W\&B profile.

Run `wandb launch <URI> --resource kubernetes --resource-args <JSON args>`, or select the Kubernetes option from the web UI.

## Resource args reference

The arguments below should be supplied as a JSON dictionary under the key `kubernetes` and passed in via `--resource-args` or via the web UI. If you already configure Kubernetes jobs with a YAML file, you can pass that in via the `job_spec` key; some commonly used options are configurable via Launch resource args outside of the `job_spec` for convenience. None of the below arguments are required to successfully run Launch with Kubernetes.

| Name               | Type                                                   | Description                                                                                                                                                                                                                                                                        |
| ------------------ | ------------------------------------------------------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| config\_file       | str                                                    | Path to a Kubernetes [config file](https://kubernetes.io/docs/concepts/configuration/organize-cluster-access-kubeconfig/). If not set, defaults to config found at `$HOME/.kube/config`. If running in a Kubernetes pod, this is ignored and the cluster config is loaded instead. |
| job\_spec          | str: path to YAML or JSON file, or JSON-encoded string | YAML- or JSON-formatted Kubernetes [Job spec](https://kubernetes.io/docs/concepts/workloads/controllers/job/). For values specified in both a Job spec and at the Launch resource args level, the resource arg value will take precedence.                                         |
| registry           | str                                                    | Docker registry to host the built image on. If unspecified, built image is hosted on local registry. Ignored if an image is provided by the user.                                                                                                                                  |
| namespace          | str                                                    | Sets metadata.namespace in a [V1Job](https://github.com/kubernetes-client/python/blob/master/kubernetes/docs/V1Job.md). If unspecified, defaults to current active namespace.                                                                                                      |
| job\_name          | str                                                    | Sets metadata.name in a [V1Job](https://github.com/kubernetes-client/python/blob/master/kubernetes/docs/V1Job.md).                                                                                                                                                                 |
| job\_labels        | dict\[str, str]                                        | Sets metadata.labels in a [V1Job](https://github.com/kubernetes-client/python/blob/master/kubernetes/docs/V1Job.md).                                                                                                                                                               |
| backoff\_limit     | int                                                    | See [V1JobSpec](https://github.com/kubernetes-client/python/blob/master/kubernetes/docs/V1JobSpec.md) for this and the following fields.                                                                                                                                           |
| completions        | int                                                    | --                                                                                                                                                                                                                                                                                 |
| parallelism        | int                                                    | --                                                                                                                                                                                                                                                                                 |
| suspend            | bool                                                   | --                                                                                                                                                                                                                                                                                 |
| restart\_policy    | str                                                    | See [V1PodSpec](https://github.com/kubernetes-client/python/blob/master/kubernetes/docs/V1PodSpec.md) for this and the following fields.                                                                                                                                           |
| preemption\_policy | str                                                    | --                                                                                                                                                                                                                                                                                 |
| node\_name         | str                                                    | --                                                                                                                                                                                                                                                                                 |
| node\_selectors    | dict\[str, str]                                        | --                                                                                                                                                                                                                                                                                 |
| container\_name    | str                                                    | Sets name in a [V1Container](https://github.com/kubernetes-client/python/blob/master/kubernetes/docs/V1Container.md).                                                                                                                                                              |
| env                | dict\[str, str]                                        | Sets env in a [V1Container](https://github.com/kubernetes-client/python/blob/master/kubernetes/docs/V1Container.md).                                                                                                                                                               |
| resource\_requests | dict\[str, str]                                        | Sets resources.requests in a [V1Container](https://github.com/kubernetes-client/python/blob/master/kubernetes/docs/V1Container.md).                                                                                                                                                |
| resource\_limits   | dict\[str, str]                                        | Sets resources.limits in a [V1Container](https://github.com/kubernetes-client/python/blob/master/kubernetes/docs/V1Container.md).                                                                                                                                                  |
